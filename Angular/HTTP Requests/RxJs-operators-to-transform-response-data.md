# Using RxJS Operators to Transform Response Data

In our data transformation process, we improve our code by using RxJS observable operators to streamline the handling of response data

- This allows us to maintain a clean subscribe function and execute different steps that focus on our data

- Before subscribing, we use the pipe method to chain operators and in this case, we need the map operator so we _import from 'rxjs/operators'_

- The map operator lets us take data, modify it, and wrap it back into an observable for further subscription
  - We create a pipe and include map as an argument, followed by a function within map `.pipe(map(responseData => { }`
    - This function takes the response data and returns the converted data

Our goal here is to turn a JavaScript object into an array, so we manually loop through the keys in the response data `for (const key in responseData)`

- Then create a new empty array `const postsArray = [];` and use a for/in loop to push each piece of data into the new array But we're not just pushing the data as it is
  - Instead, we create a new object for each item, using the spread operator to extract key value pairs `({ ...responseData[key], id: key })`
  - We also add an 'id' field to this object to store the key, which serves as a unique identifier generated by Firebase

It's good practice to wrap this process with an if statement to ensure that 'response data' has the key as its own property

In _app.component.ts_:

```
import { map } from 'rxjs/operators';
....
private fetchPosts() {
    this.http
    .get('https://http-requests-code-along-default-rtdb.firebaseio.com/posts.json')
    .pipe(map(responseData => {
      const postsArray = [];
      for (const key in responseData) {
        if (responseData.hasOwnProperty(key)) {
          postsArray.push({ ...responseData[key], id: key })
        }
      }
      return postsArray;
    })
    )
    .subscribe(posts => {
      // ...
      console.log(posts);
    });
  }
```

In the end, we get an array of posts and we return this postsArray within the map operator, the data is then sent to our subscribe function and this method allows us to effectively transform our data
