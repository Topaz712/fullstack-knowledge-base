# Debugging Code in the Browser Using Sourcemaps

Sometimes reading error messages isn't enough or we don't even get an error message so it's not easy to debug a message like this because we're not getting an error message but we get a logical error in our app instead.

In the video Max show's that when he tries to delete a server they get deleted when he clicks on them, but the last server won't delete

In the `app.component.html` :

```
<li
  class="list-group-item"
  *ngFor="let server fo servers; let i = index"
  (click)="onRemoveServer(i)">{{ server }}</li>
```

In the `app.component.ts` :

```
onRemoveServer(id: number) {
const position = id + 1;
this.servers.splice(position, 1);
}
```

- Debugging is supported in the Developers tools so to check we go to "sources" and here we'll find all the sources imported on the page, then we see a couple of script bundles as well but the important one for us is the "main.bundle.js" folder bundle

  - But when we take a look at the main bundle we see it's not easy to debug, theoretically, so when we look at it and we can try to find the line responsible for splicing and once we find it we can try debugging it

- If we place a breakpoint there, we can do this in our developers tools, we see it change, it jumps to a tab with our `app.component.ts` but **don't forget, TypeScript isn't what runs on the browser**
  so we see the JavaScript files being used so _How can we access TypeScript?_ **Because those JavaScript files support source maps**

## What are Source Maps?

- Sourcemaps are additional files that get generated by the CLI, they are added to our bundles which serve a crucial purpose in development use only, since sourcemaps will be stripped out for production
  - Sourcemaps enable browsers to translate our JavaScript code back to TypeScript.
    - This aids in debugging by providing a link between the compiled code and the original TypeScript source code.

Now we can place a breakpoint in our TypeScript code and now when we click in the browser it gets paused and when we check our code"in dev tools still" we can see that Id is currently at 2 `id=2`

- So the logical error in the code is adding 1 to the id when calculating the position for element removal
  - This leads to an incorrect position calculation, causing the wrong element to be deleted from the array.
    - So in Max's example, if trying to delete the element at position 2, the code actually removes the element at position 3 due to the addition of 1.

So in the end, manually scanning a large main bundle to find the correct spot in the TypeScript code can be challenging and time-consuming

- A more efficient approach is for us to directly access TypeScript files through the browser's developer tools

  - Under webpack, we can access TypeScript files in the same project structure, making it easier to find and debug specific files
    like so:

- webpack

  - .
    - src
      - app
        - "All our typescript folders will be in here"

- The great thing with Sourcemaps is it's direct access to TypeScript files, simplifies the process of finding and debugging code, and doing it this way is helpful for resolving logical errors
  - In addition to reading error messages we might get
